# Wazuh GraphRAG 整合監控系統 - 環境變數配置範例
# 複製此檔案為 .env 並設定實際的 API 金鑰和配置

# ===== LLM 服務配置 =====
# OpenAI API 金鑰 (必須)
OPENAI_API_KEY=your_openai_api_key_here

# OpenAI 模型設定
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
OPENAI_MAX_TOKENS=4096
OPENAI_TEMPERATURE=0.1

# ===== OpenSearch (Wazuh Indexer) 連接設定 =====
OPENSEARCH_HOST=wazuh.indexer
OPENSEARCH_PORT=9200
OPENSEARCH_USERNAME=admin
OPENSEARCH_PASSWORD=SecretPassword
OPENSEARCH_USE_SSL=true
OPENSEARCH_VERIFY_CERTS=false

# ===== Neo4j 圖形資料庫連接設定 =====
# 這些值會被 docker-compose.main.yml 中的環境變數覆蓋
NEO4J_URI=bolt://neo4j:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=wazuh-graph-2024
NEO4J_DATABASE=neo4j

# ===== GraphRAG 功能設定 =====
# 是否啟用圖形持久化
ENABLE_GRAPH_PERSISTENCE=true

# 批次處理設定
GRAPH_BATCH_SIZE=100
GRAPH_MAX_ENTITIES_PER_ALERT=50
GRAPH_UPDATE_INTERVAL=300

# 實體抽取設定
ENTITY_EXTRACTION_MODEL=gpt-4-turbo-preview
RELATION_EXTRACTION_MODEL=gpt-4-turbo-preview
MAX_ENTITIES_PER_CHUNK=20

# ===== RAG 系統設定 =====
# 向量資料庫設定
VECTOR_DIMENSION=1536
SIMILARITY_THRESHOLD=0.7
MAX_SEARCH_RESULTS=10

# 檢索設定
RETRIEVAL_TOP_K=5
RERANK_TOP_K=3
CONTEXT_WINDOW_SIZE=4000

# ===== AI Agent 服務設定 =====
# 應用程式設定
APP_NAME=Wazuh-AI-Agent
APP_VERSION=1.0.0
DEBUG=false
LOG_LEVEL=INFO

# 服務埠號
SERVICE_PORT=8000
METRICS_PORT=8000

# ===== 監控與指標設定 =====
# 是否啟用監控
METRICS_ENABLED=true
HEALTH_CHECK_ENABLED=true

# Prometheus 指標配置
METRICS_PATH=/metrics
METRICS_UPDATE_INTERVAL=15

# ===== 安全設定 =====
# API 金鑰 (如果需要)
API_KEY=your_api_key_here

# CORS 設定
CORS_ORIGINS=*
CORS_METHODS=GET,POST,PUT,DELETE
CORS_HEADERS=*

# ===== 快取設定 =====
# Redis 快取 (可選)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# 快取過期時間 (秒)
CACHE_TTL=3600
EMBEDDING_CACHE_TTL=86400

# ===== 效能調優設定 =====
# 平行處理設定
MAX_WORKERS=4
MAX_CONCURRENT_REQUESTS=100

# 記憶體限制
MAX_MEMORY_USAGE=2GB
GARBAGE_COLLECTION_THRESHOLD=0.8

# ===== 日誌設定 =====
LOG_FORMAT=json
LOG_FILE=/var/log/ai-agent.log
LOG_ROTATION=daily
LOG_RETENTION_DAYS=30

# ===== 開發與除錯設定 =====
# 開發模式
DEVELOPMENT_MODE=false
AUTO_RELOAD=false

# 除錯設定
ENABLE_PROFILING=false
ENABLE_TRACING=false
TRACE_SAMPLE_RATE=0.1